{"ast":null,"code":"import _objectSpread from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{authUserIfUserExist}from\"../../store/Auth/Thunks/authUserIfUserExist\";import{selectUserErrorMessage,selectUserAuthenticated}from\"../../store/Auth/selectors\";import logo from\"../../assets/images/logo.png\";import styles from\"./styles.module.css\";import{useEffect}from\"react\";import{InputText}from\"../../UI/InputText/InputText\";import{InputPassWithHide}from\"../../UI/InputPassWithHide/InputPassWithHide\";import{isEmail}from\"validator\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var FormElement=function FormElement(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState({isValid:true,errorMessage:\" \"}),_useState6=_slicedToArray(_useState5,2),validate=_useState6[0],setValidate=_useState6[1];var isSuccessAuth=useSelector(function(state){return selectUserAuthenticated(state);});var navigate=useNavigate();var dispatch=useDispatch();var errorMessage=useSelector(function(state){return selectUserErrorMessage(state);});var user=localStorage.userId;useEffect(function(){if(user){navigate(\"/users\");}setValidate(_objectSpread(_objectSpread({},validate),{},{isValid:true}));},[isSuccessAuth]);var handleValidate=function handleValidate(){if(!email||!password){setValidate({isValid:false,errorMessage:\"Введите логин и пароль!\"});}else if(!isEmail(email)){setValidate({isValid:false,errorMessage:\"Неверный формат электронной почты\"});}else if(errorMessage){setValidate({isValid:false,errorMessage:\"Неверный логин или пароль!\"});}else{setValidate({isValid:true,errorMessage:\" \"});}};var handleSubmit=function handleSubmit(event){dispatch(authUserIfUserExist({email:email,password:password}));event.preventDefault();handleValidate();};return/*#__PURE__*/_jsx(\"div\",{className:styles.login_formWrapper,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:styles.form,children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\",className:styles.form_logo}),/*#__PURE__*/_jsx(InputText,{label:\"Логин\",value:email,setValue:setEmail}),/*#__PURE__*/_jsx(InputPassWithHide,{label:\"Пароль\",value:password,setValue:setPassword}),/*#__PURE__*/_jsx(\"span\",{className:styles.errorMessage,children:validate.errorMessage}),/*#__PURE__*/_jsx(\"button\",{className:styles.form_submit,type:\"submit\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.form_forget,type:\"button\",children:\"\\u0417\\u0430\\u0431\\u044B\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C?\"})]})});};","map":{"version":3,"names":["useState","useDispatch","useSelector","useNavigate","authUserIfUserExist","selectUserErrorMessage","selectUserAuthenticated","logo","styles","useEffect","InputText","InputPassWithHide","isEmail","FormElement","email","setEmail","password","setPassword","isValid","errorMessage","validate","setValidate","isSuccessAuth","state","navigate","dispatch","user","localStorage","userId","handleValidate","handleSubmit","event","preventDefault","login_formWrapper","form","form_logo","form_submit","form_forget"],"sources":["D:/dev/uno/src/Components/FormElement/FormElement.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { authUserIfUserExist } from \"../../store/Auth/Thunks/authUserIfUserExist\";\r\nimport {\r\n  selectUserErrorMessage,\r\n  selectUserAuthenticated,\r\n} from \"../../store/Auth/selectors\";\r\nimport logo from \"../../assets/images/logo.png\";\r\nimport styles from \"./styles.module.css\";\r\nimport { useEffect } from \"react\";\r\nimport { InputText } from \"../../UI/InputText/InputText\";\r\nimport { InputPassWithHide } from \"../../UI/InputPassWithHide/InputPassWithHide\";\r\nimport { isEmail } from \"validator\";\r\n\r\nexport const FormElement = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [validate, setValidate] = useState({\r\n    isValid: true,\r\n    errorMessage: \" \",\r\n  });\r\n  const isSuccessAuth = useSelector((state) => selectUserAuthenticated(state));\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const errorMessage = useSelector((state) => selectUserErrorMessage(state));\r\n  const user = localStorage.userId;\r\n  useEffect(() => {\r\n    if (user) {\r\n      navigate(\"/users\");\r\n    }\r\n    setValidate({ ...validate, isValid: true });\r\n  }, [isSuccessAuth]);\r\n\r\n  const handleValidate = () => {\r\n    if (!email || !password) {\r\n      setValidate({ isValid: false, errorMessage: \"Введите логин и пароль!\" });\r\n    } else if (!isEmail(email)) {\r\n      setValidate({\r\n        isValid: false,\r\n        errorMessage: \"Неверный формат электронной почты\",\r\n      });\r\n    } else if (errorMessage) {\r\n      setValidate({\r\n        isValid: false,\r\n        errorMessage: \"Неверный логин или пароль!\",\r\n      });\r\n    } else {\r\n      setValidate({ isValid: true, errorMessage: \" \" });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    dispatch(authUserIfUserExist({ email, password }));\r\n    event.preventDefault();\r\n    handleValidate();\r\n  };\r\n\r\n  return (\r\n    <div className={styles.login_formWrapper}>\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className={styles.form}>\r\n        <img\r\n          src={logo}\r\n          alt=\"logo\"\r\n          className={styles.form_logo}\r\n        />\r\n        <InputText\r\n          label={\"Логин\"}\r\n          value={email}\r\n          setValue={setEmail}\r\n        />\r\n        <InputPassWithHide\r\n          label={\"Пароль\"}\r\n          value={password}\r\n          setValue={setPassword}\r\n        />\r\n        <span className={styles.errorMessage}>{validate.errorMessage}</span>\r\n        <button\r\n          className={styles.form_submit}\r\n          type=\"submit\">\r\n          Войти\r\n        </button>\r\n        <button\r\n          className={styles.form_forget}\r\n          type=\"button\">\r\n          Забыли пароль?\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}