{"ast":null,"code":"import _defineProperty from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{setNewPassword}from\"../../store/Auth/Thunks/setNewPassword\";import styles from\"./styles.module.css\";import{useDispatch,useSelector}from\"react-redux\";import{useEffect}from\"react\";import{selectUserPasswordError,selectUserPasswordSuccess}from\"../../store/Auth/selectors\";import classNames from\"classnames\";import{InputPass}from\"../../UI/InputPass/InputPass\";import{FormElem}from\"../../Components/FormElem/FormElem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Profile=function Profile(){var dispatch=useDispatch();var initialValidate={validate:true,errorMessage:\" \"};var _useState=useState(initialValidate),_useState2=_slicedToArray(_useState,2),validate=_useState2[0],setValidate=_useState2[1];var serverErrorMessage=useSelector(function(state){return selectUserPasswordError(state);});var mess=useSelector(function(state){return selectUserPasswordSuccess(state);});useEffect(function(){if(validate.errorMessage<5&&form.newPassword.length>=6){setValidate(initialValidate);dispatch(setNewPassword({pass:form.password,id:localStorage.userId/1,newPass:form.newPassword}));setForm({password:\"\",newPassword:\"\",repeat:\"\"});}setValidate(_objectSpread(_objectSpread({},validate),{},{validate:true}));},[validate.errorMessage]);var _useState3=useState({password:\"\",newPassword:\"\",repeat:\"\"}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var handleValidate=function handleValidate(){var regularExpression=/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&+=*]{6,30}$/;if(form.newPassword!==form.repeat){setValidate({validate:false,errorMessage:\"Пароли не совпадают!\"});}else if(!regularExpression.test(form.newPassword)){setValidate({validate:false,errorMessage:\"Новый пароль должен содержать латинские буквы верхнего и нижнего регистра, цифры и специальные символы и быть длинной от 6 до 30 символов\"});}else if(serverErrorMessage){setValidate({validate:false,errorMessage:serverErrorMessage});}else{setValidate(_objectSpread(_objectSpread({},validate),{},{errorMessage:\"  \",mess:mess}));}};var onSubmit=function onSubmit(e){e.preventDefault();handleValidate();};return/*#__PURE__*/_jsxs(\"div\",{className:styles.profile,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \"}),/*#__PURE__*/_jsxs(FormElem,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(InputPass,{value:form.password,label:\"Старый пароль\",setValue:function setValue(e){return setForm(_objectSpread(_objectSpread({},form),{},{password:e}));}}),/*#__PURE__*/_jsx(InputPass,{value:form.newPassword,label:\"Новый пароль\",setValue:function setValue(e){return setForm(_objectSpread(_objectSpread({},form),{},{newPassword:e}));}}),/*#__PURE__*/_jsx(InputPass,{value:form.repeat,label:\"Повторите пароль\",setValue:function setValue(e){return setForm(_objectSpread(_objectSpread({},form),{},{repeat:e}));}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:function onClick(e){return onSubmit(e);},className:styles.submit,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"span\",{className:classNames(styles.errorMessage,_defineProperty({},styles.successMessage,validate.mess)),children:validate.mess?mess:validate.errorMessage})]})]});};","map":{"version":3,"names":["useState","setNewPassword","styles","useDispatch","useSelector","useEffect","selectUserPasswordError","selectUserPasswordSuccess","classNames","InputPass","FormElem","Profile","dispatch","initialValidate","validate","errorMessage","setValidate","serverErrorMessage","state","mess","form","newPassword","length","pass","password","id","localStorage","userId","newPass","setForm","repeat","handleValidate","regularExpression","test","onSubmit","e","preventDefault","profile","title","submit","successMessage"],"sources":["D:/dev/uno/src/Pages/Profile/Profile.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { setNewPassword } from \"../../store/Auth/Thunks/setNewPassword\";\r\nimport styles from \"./styles.module.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport {\r\n  selectUserPasswordError,\r\n  selectUserPasswordSuccess,\r\n} from \"../../store/Auth/selectors\";\r\nimport classNames from \"classnames\";\r\nimport { InputPass } from \"../../UI/InputPass/InputPass\";\r\nimport { FormElem } from \"../../Components/FormElem/FormElem\";\r\n\r\nexport const Profile = () => {\r\n  const dispatch = useDispatch();\r\n  const initialValidate = {\r\n    validate: true,\r\n    errorMessage: \" \",\r\n  };\r\n  const [validate, setValidate] = useState(initialValidate);\r\n  const serverErrorMessage = useSelector((state) =>\r\n    selectUserPasswordError(state)\r\n  );\r\n  const mess = useSelector((state) => selectUserPasswordSuccess(state));\r\n  useEffect(() => {\r\n    if (validate.errorMessage < 5 && form.newPassword.length >= 6) {\r\n      setValidate(initialValidate);\r\n      dispatch(\r\n        setNewPassword({\r\n          pass: form.password,\r\n          id: localStorage.userId / 1,\r\n          newPass: form.newPassword,\r\n        })\r\n      );\r\n      setForm({\r\n        password: \"\",\r\n        newPassword: \"\",\r\n        repeat: \"\",\r\n      });\r\n    }\r\n\r\n    setValidate({ ...validate, validate: true });\r\n  }, [validate.errorMessage]);\r\n\r\n  const [form, setForm] = useState({\r\n    password: \"\",\r\n    newPassword: \"\",\r\n    repeat: \"\",\r\n  });\r\n\r\n  const handleValidate = () => {\r\n    const regularExpression =\r\n      /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&+=*]{6,30}$/;\r\n    if (form.newPassword !== form.repeat) {\r\n      setValidate({ validate: false, errorMessage: \"Пароли не совпадают!\" });\r\n    } else if (!regularExpression.test(form.newPassword)) {\r\n      setValidate({\r\n        validate: false,\r\n        errorMessage:\r\n          \"Новый пароль должен содержать латинские буквы верхнего и нижнего регистра, цифры и специальные символы и быть длинной от 6 до 30 символов\",\r\n      });\r\n    } else if (serverErrorMessage) {\r\n      setValidate({ validate: false, errorMessage: serverErrorMessage });\r\n    } else {\r\n      setValidate({ ...validate, errorMessage: \"  \", mess });\r\n    }\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleValidate();\r\n  };\r\n\r\n  return (\r\n    <div className={styles.profile}>\r\n      <h2 className={styles.title}>Сбросить пароль </h2>\r\n      <FormElem\r\n        onSubmit={onSubmit}>\r\n        <InputPass\r\n          value={form.password}\r\n          label={\"Старый пароль\"}\r\n          setValue={(e) => setForm({ ...form, password: e })}\r\n        />\r\n        <InputPass\r\n          value={form.newPassword}\r\n          label={\"Новый пароль\"}\r\n          setValue={(e) => setForm({ ...form, newPassword: e })}\r\n        />\r\n        <InputPass\r\n          value={form.repeat}\r\n          label={\"Повторите пароль\"}\r\n          setValue={(e) => setForm({ ...form, repeat: e })}\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          onClick={(e) => onSubmit(e)}\r\n          className={styles.submit}>\r\n          Сохранить\r\n        </button>\r\n        <span\r\n          className={classNames(styles.errorMessage, {\r\n            [styles.successMessage]: validate.mess,\r\n          })}>\r\n          {validate.mess ? mess : validate.errorMessage}\r\n        </span>\r\n      </FormElem>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"iSAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,cAAc,KAAQ,wCAAwC,CACvE,MAAOC,OAAM,KAAM,qBAAqB,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,SAAS,KAAQ,OAAO,CACjC,OACEC,uBAAuB,CACvBC,yBAAyB,KACpB,4BAA4B,CACnC,MAAOC,WAAU,KAAM,YAAY,CACnC,OAASC,SAAS,KAAQ,8BAA8B,CACxD,OAASC,QAAQ,KAAQ,oCAAoC,CAAC,wFAE9D,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAO,EAAS,CAC3B,GAAMC,SAAQ,CAAGT,WAAW,EAAE,CAC9B,GAAMU,gBAAe,CAAG,CACtBC,QAAQ,CAAE,IAAI,CACdC,YAAY,CAAE,GAChB,CAAC,CACD,cAAgCf,QAAQ,CAACa,eAAe,CAAC,wCAAlDC,QAAQ,eAAEE,WAAW,eAC5B,GAAMC,mBAAkB,CAAGb,WAAW,CAAC,SAACc,KAAK,QAC3CZ,wBAAuB,CAACY,KAAK,CAAC,GAC/B,CACD,GAAMC,KAAI,CAAGf,WAAW,CAAC,SAACc,KAAK,QAAKX,0BAAyB,CAACW,KAAK,CAAC,GAAC,CACrEb,SAAS,CAAC,UAAM,CACd,GAAIS,QAAQ,CAACC,YAAY,CAAG,CAAC,EAAIK,IAAI,CAACC,WAAW,CAACC,MAAM,EAAI,CAAC,CAAE,CAC7DN,WAAW,CAACH,eAAe,CAAC,CAC5BD,QAAQ,CACNX,cAAc,CAAC,CACbsB,IAAI,CAAEH,IAAI,CAACI,QAAQ,CACnBC,EAAE,CAAEC,YAAY,CAACC,MAAM,CAAG,CAAC,CAC3BC,OAAO,CAAER,IAAI,CAACC,WAChB,CAAC,CAAC,CACH,CACDQ,OAAO,CAAC,CACNL,QAAQ,CAAE,EAAE,CACZH,WAAW,CAAE,EAAE,CACfS,MAAM,CAAE,EACV,CAAC,CAAC,CACJ,CAEAd,WAAW,gCAAMF,QAAQ,MAAEA,QAAQ,CAAE,IAAI,GAAG,CAC9C,CAAC,CAAE,CAACA,QAAQ,CAACC,YAAY,CAAC,CAAC,CAE3B,eAAwBf,QAAQ,CAAC,CAC/BwB,QAAQ,CAAE,EAAE,CACZH,WAAW,CAAE,EAAE,CACfS,MAAM,CAAE,EACV,CAAC,CAAC,yCAJKV,IAAI,eAAES,OAAO,eAMpB,GAAME,eAAc,CAAG,QAAjBA,eAAc,EAAS,CAC3B,GAAMC,kBAAiB,CACrB,0DAA0D,CAC5D,GAAIZ,IAAI,CAACC,WAAW,GAAKD,IAAI,CAACU,MAAM,CAAE,CACpCd,WAAW,CAAC,CAAEF,QAAQ,CAAE,KAAK,CAAEC,YAAY,CAAE,sBAAuB,CAAC,CAAC,CACxE,CAAC,IAAM,IAAI,CAACiB,iBAAiB,CAACC,IAAI,CAACb,IAAI,CAACC,WAAW,CAAC,CAAE,CACpDL,WAAW,CAAC,CACVF,QAAQ,CAAE,KAAK,CACfC,YAAY,CACV,2IACJ,CAAC,CAAC,CACJ,CAAC,IAAM,IAAIE,kBAAkB,CAAE,CAC7BD,WAAW,CAAC,CAAEF,QAAQ,CAAE,KAAK,CAAEC,YAAY,CAAEE,kBAAmB,CAAC,CAAC,CACpE,CAAC,IAAM,CACLD,WAAW,gCAAMF,QAAQ,MAAEC,YAAY,CAAE,IAAI,CAAEI,IAAI,CAAJA,IAAI,GAAG,CACxD,CACF,CAAC,CAED,GAAMe,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,CAAC,CAAK,CACtBA,CAAC,CAACC,cAAc,EAAE,CAClBL,cAAc,EAAE,CAClB,CAAC,CAED,mBACE,aAAK,SAAS,CAAE7B,MAAM,CAACmC,OAAQ,wBAC7B,WAAI,SAAS,CAAEnC,MAAM,CAACoC,KAAM,UAAC,wFAAgB,EAAK,cAClD,MAAC,QAAQ,EACP,QAAQ,CAAEJ,QAAS,wBACnB,KAAC,SAAS,EACR,KAAK,CAAEd,IAAI,CAACI,QAAS,CACrB,KAAK,CAAE,eAAgB,CACvB,QAAQ,CAAE,kBAACW,CAAC,QAAKN,QAAO,gCAAMT,IAAI,MAAEI,QAAQ,CAAEW,CAAC,GAAG,EAAC,EACnD,cACF,KAAC,SAAS,EACR,KAAK,CAAEf,IAAI,CAACC,WAAY,CACxB,KAAK,CAAE,cAAe,CACtB,QAAQ,CAAE,kBAACc,CAAC,QAAKN,QAAO,gCAAMT,IAAI,MAAEC,WAAW,CAAEc,CAAC,GAAG,EAAC,EACtD,cACF,KAAC,SAAS,EACR,KAAK,CAAEf,IAAI,CAACU,MAAO,CACnB,KAAK,CAAE,kBAAmB,CAC1B,QAAQ,CAAE,kBAACK,CAAC,QAAKN,QAAO,gCAAMT,IAAI,MAAEU,MAAM,CAAEK,CAAC,GAAG,EAAC,EACjD,cACF,eACE,IAAI,CAAC,QAAQ,CACb,OAAO,CAAE,iBAACA,CAAC,QAAKD,SAAQ,CAACC,CAAC,CAAC,EAAC,CAC5B,SAAS,CAAEjC,MAAM,CAACqC,MAAO,UAAC,wDAE5B,EAAS,cACT,aACE,SAAS,CAAE/B,UAAU,CAACN,MAAM,CAACa,YAAY,oBACtCb,MAAM,CAACsC,cAAc,CAAG1B,QAAQ,CAACK,IAAI,EACrC,UACFL,QAAQ,CAACK,IAAI,CAAGA,IAAI,CAAGL,QAAQ,CAACC,YAAY,EACxC,GACE,GACP,CAEV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}