{"ast":null,"code":"var _jsxFileName = \"D:\\\\dev\\\\uno\\\\src\\\\Pages\\\\Users\\\\Users.jsx\",\n  _s = $RefreshSig$();\nimport classNames from \"classnames\";\nimport styles from \"./styles.module.css\";\nimport { nanoid } from \"nanoid\";\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectUsersIds, selectUsersIsLoading } from \"../../store/Users/selectors\";\nimport { loadUsers } from \"../../store/Users/Thunks/loadUsers\";\nimport { UserDataContainer } from \"../../Containers/UserDataContainer/UserDataContainer\";\nimport { useSingleEffect } from \"../../hooks/UseSingleEffect\";\nimport { PopupContainer } from \"../../Containers/PopupContainer/PopupContainer\";\nimport { AddUserForm } from \"../../Components/AddUserForm/AddUserForm\";\nimport { EditUserForm } from \"../../Components/EditUserForm/EditUserForm\";\nimport { Table } from \"../../Components/Table/Table\";\nimport { ButtonBar } from \"../../Components/ButtonsBar/ButtonsBar\";\nimport { DeletePopup } from \"../../Components/DeletePopup/DeletePopup\";\nimport { useNavigate } from \"react-router-dom\";\nimport { TableHeader } from \"../../Components/TableHeader/TableHeader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst USER_HEADERS = [\"#\", \"НАИМЕНОВАНИЕ\", \"E-mail\", \"Телефон\", \"Роль\", \"Франшиза\", \"Баланс\"];\nexport const Users = () => {\n  _s();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const isLoading = useSelector(state => selectUsersIsLoading(state));\n  useSingleEffect(() => {\n    dispatch(loadUsers({\n      userId\n    }));\n    setIsRowSelected(false);\n  }, []);\n  const usersIds = useSelector(state => selectUsersIds(state));\n  const [isPopupOpened, setIsPopupOpened] = useState(false);\n  const [isRowSelected, setIsRowSelected] = useState(false);\n  const [isEditPopupOpened, setIsEditPopupOpened] = useState(false);\n  const [isDeletePopupOpened, setIsDeletePopupOpened] = useState(false);\n  const [selectedRow, setSelectedRow] = useState(false);\n  const userId = localStorage.userId / 1;\n  const toggleAddPopup = () => {\n    setIsPopupOpened(!isPopupOpened);\n  };\n  const resetSelectedRow = () => {\n    setSelectedRow(false);\n    setIsRowSelected(false);\n  };\n  const toggleDeletePopup = () => {\n    setIsDeletePopupOpened(!isDeletePopupOpened);\n  };\n  const toggleEditPopup = () => {\n    setIsEditPopupOpened(!isEditPopupOpened);\n  };\n  const toggleSelectedRow = el => {\n    if (userId / 1 !== el) {\n      if (!!el) {\n        if (selectedRow === el) {\n          resetSelectedRow();\n        } else {\n          setIsRowSelected(true);\n          setSelectedRow(el);\n        }\n      } else {\n        resetSelectedRow();\n      }\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.users_wrapper,\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      children: [/*#__PURE__*/_jsxDEV(TableHeader, {\n        headers: USER_HEADERS\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), usersIds === null || usersIds === void 0 ? void 0 : usersIds.map(id => {\n        return /*#__PURE__*/_jsxDEV(UserDataContainer, {\n          onclick: toggleSelectedRow,\n          onDoubleClick: () => navigate(`/users/${id}`),\n          id: id,\n          selectedRow: selectedRow\n        }, nanoid(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ButtonBar, {\n      onClicks: [toggleAddPopup, toggleEditPopup, toggleDeletePopup],\n      disabled: !isRowSelected\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), isPopupOpened && /*#__PURE__*/_jsxDEV(PopupContainer, {\n      togglePopup: toggleAddPopup,\n      children: /*#__PURE__*/_jsxDEV(AddUserForm, {\n        togglePopup: toggleAddPopup\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this), isDeletePopupOpened && /*#__PURE__*/_jsxDEV(DeletePopup, {\n      id: selectedRow,\n      toggleDeletePopup: toggleDeletePopup,\n      resetSelectedRow: resetSelectedRow\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this), isEditPopupOpened && /*#__PURE__*/_jsxDEV(PopupContainer, {\n      togglePopup: toggleEditPopup,\n      children: /*#__PURE__*/_jsxDEV(EditUserForm, {\n        id: selectedRow,\n        togglePopup: toggleEditPopup,\n        resetSelectedRow: resetSelectedRow\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n_s(Users, \"PxNV2ef0QaeM+8mFxKhmVMbT1Yw=\", false, function () {\n  return [useNavigate, useDispatch, useSelector, useSingleEffect, useSelector];\n});\n_c = Users;\nvar _c;\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"names":["classNames","styles","nanoid","useState","useDispatch","useSelector","selectUsersIds","selectUsersIsLoading","loadUsers","UserDataContainer","useSingleEffect","PopupContainer","AddUserForm","EditUserForm","Table","ButtonBar","DeletePopup","useNavigate","TableHeader","USER_HEADERS","Users","navigate","dispatch","isLoading","state","userId","setIsRowSelected","usersIds","isPopupOpened","setIsPopupOpened","isRowSelected","isEditPopupOpened","setIsEditPopupOpened","isDeletePopupOpened","setIsDeletePopupOpened","selectedRow","setSelectedRow","localStorage","toggleAddPopup","resetSelectedRow","toggleDeletePopup","toggleEditPopup","toggleSelectedRow","el","users_wrapper","map","id"],"sources":["D:/dev/uno/src/Pages/Users/Users.jsx"],"sourcesContent":["import classNames from \"classnames\";\r\nimport styles from \"./styles.module.css\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectUsersIds,\r\n  selectUsersIsLoading,\r\n} from \"../../store/Users/selectors\";\r\nimport { loadUsers } from \"../../store/Users/Thunks/loadUsers\";\r\nimport { UserDataContainer } from \"../../Containers/UserDataContainer/UserDataContainer\";\r\nimport { useSingleEffect } from \"../../hooks/UseSingleEffect\";\r\nimport { PopupContainer } from \"../../Containers/PopupContainer/PopupContainer\";\r\nimport { AddUserForm } from \"../../Components/AddUserForm/AddUserForm\";\r\nimport { EditUserForm } from \"../../Components/EditUserForm/EditUserForm\";\r\nimport { Table } from \"../../Components/Table/Table\";\r\nimport { ButtonBar } from \"../../Components/ButtonsBar/ButtonsBar\";\r\nimport {DeletePopup} from \"../../Components/DeletePopup/DeletePopup\"\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { TableHeader } from \"../../Components/TableHeader/TableHeader\";\r\n\r\nconst USER_HEADERS = [\r\n  \"#\",\r\n  \"НАИМЕНОВАНИЕ\",\r\n  \"E-mail\",\r\n  \"Телефон\",\r\n  \"Роль\",\r\n  \"Франшиза\",\r\n  \"Баланс\",\r\n];\r\n\r\nexport const Users = () => {\r\n  const navigate = useNavigate( )\r\n  const dispatch = useDispatch();\r\n  const isLoading = useSelector((state) => selectUsersIsLoading(state));\r\n  useSingleEffect(() => {\r\n    dispatch(loadUsers({ userId }));\r\n    setIsRowSelected(false);\r\n  }, []);\r\n  const usersIds = useSelector((state) => selectUsersIds(state));\r\n  const [isPopupOpened, setIsPopupOpened] = useState(false);\r\n  const [isRowSelected, setIsRowSelected] = useState(false);\r\n  const [isEditPopupOpened, setIsEditPopupOpened] = useState(false);\r\n  const [isDeletePopupOpened, setIsDeletePopupOpened] = useState(false);\r\n  const [selectedRow, setSelectedRow] = useState(false);\r\n\r\n  const userId = localStorage.userId / 1;\r\n\r\n  const toggleAddPopup = () => {\r\n    setIsPopupOpened(!isPopupOpened);\r\n  };\r\n  const resetSelectedRow = () => {\r\n    setSelectedRow(false);\r\n    setIsRowSelected(false);\r\n  };\r\n  const toggleDeletePopup = () => {\r\n    setIsDeletePopupOpened(!isDeletePopupOpened);\r\n  };\r\n\r\n  const toggleEditPopup = () => {\r\n    setIsEditPopupOpened(!isEditPopupOpened);\r\n  };\r\n\r\n  const toggleSelectedRow = (el) => {\r\n    if (userId / 1 !== el) {\r\n      if (!!el) {\r\n        if (selectedRow === el) {\r\n          resetSelectedRow();\r\n        } else {\r\n          setIsRowSelected(true);\r\n          setSelectedRow(el);\r\n        }\r\n      } else {\r\n        resetSelectedRow();\r\n      }\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.users_wrapper}>\r\n      <Table>\r\n        <TableHeader headers={USER_HEADERS} />\r\n        {usersIds?.map((id) => {\r\n          return (\r\n            <UserDataContainer\r\n              onclick={toggleSelectedRow}\r\n              onDoubleClick={() => navigate(`/users/${id}`)}\r\n              id={id}\r\n              selectedRow={selectedRow}\r\n              key={nanoid()}\r\n            />\r\n          );\r\n        })}\r\n      </Table>\r\n      <ButtonBar\r\n        onClicks={[toggleAddPopup, toggleEditPopup, toggleDeletePopup]}\r\n        disabled={!isRowSelected}\r\n      />\r\n      {isPopupOpened && (\r\n        <PopupContainer togglePopup={toggleAddPopup}>\r\n          <AddUserForm togglePopup={toggleAddPopup} />\r\n        </PopupContainer>\r\n      )}\r\n      {isDeletePopupOpened && (\r\n        <DeletePopup\r\n          id={selectedRow}\r\n          toggleDeletePopup={toggleDeletePopup}\r\n          resetSelectedRow={resetSelectedRow}\r\n        />\r\n      )}\r\n      {isEditPopupOpened && (\r\n        <PopupContainer togglePopup={toggleEditPopup}>\r\n          <EditUserForm\r\n            id={selectedRow}\r\n            togglePopup={toggleEditPopup}\r\n            resetSelectedRow={resetSelectedRow}\r\n          />\r\n        </PopupContainer>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}