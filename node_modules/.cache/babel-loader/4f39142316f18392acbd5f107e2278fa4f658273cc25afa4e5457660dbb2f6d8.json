{"ast":null,"code":"import{useSelector}from\"react-redux\";import{cityFranshisesSliceActions}from\"..\";import{normolizeEntities}from\"../../helpers/normalizeEntites\";import{selectCityFranshisesIds}from\"../selectors\";export var getCityFransheses=function getCityFransheses(_ref){var userId=_ref.userId;return function(dispatch,getState){var _selectCityFranshises;if(((_selectCityFranshises=selectCityFranshisesIds(getState()))===null||_selectCityFranshises===void 0?void 0:_selectCityFranshises.length)>0){return;}var options={method:\"POST\",headers:{\"Content-Type\":\"application/json;charset=utf-8\"},body:JSON.stringify({id:userId})};dispatch(cityFranshisesSliceActions.startLoading());fetch(\"https://wsuno.xyz/api/getcityfran\",options).then(function(res){return res.json();}).then(function(data){if(!data.OK){throw Error(data.error);}dispatch(cityFranshisesSliceActions.successLoading(normolizeEntities(data.result,'NAME')));}).catch(function(err){console.log(err);dispatch(cityFranshisesSliceActions.failLoading(err));});};};","map":{"version":3,"names":["useSelector","cityFranshisesSliceActions","normolizeEntities","selectCityFranshisesIds","getCityFransheses","userId","dispatch","getState","length","options","method","headers","body","JSON","stringify","id","startLoading","fetch","then","res","json","data","OK","Error","error","successLoading","result","catch","err","console","log","failLoading"],"sources":["D:/dev/uno/src/store/CityFranshises/Thunks/getCityFransheses.js"],"sourcesContent":["import { useSelector } from \"react-redux\";\r\nimport { cityFranshisesSliceActions } from \"..\";\r\nimport { normolizeEntities } from \"../../helpers/normalizeEntites\";\r\nimport { selectCityFranshisesIds } from \"../selectors\";\r\n\r\nexport const getCityFransheses =\r\n  ({ userId }) =>\r\n  (dispatch, getState) => {\r\n    if (selectCityFranshisesIds(getState())?.length > 0) {\r\n      return;\r\n    }\r\n    const options = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json;charset=utf-8\",\r\n      },\r\n      body: JSON.stringify({\r\n        id: userId,\r\n      }),\r\n    };\r\n    dispatch(cityFranshisesSliceActions.startLoading());\r\n\r\n    fetch(\"https://wsuno.xyz/api/getcityfran\", options)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (!data.OK) {\r\n          throw Error(data.error);\r\n        }\r\n        dispatch(\r\n          cityFranshisesSliceActions.successLoading(\r\n            normolizeEntities(data.result, 'NAME')\r\n          )\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(cityFranshisesSliceActions.failLoading(err));\r\n      });\r\n  };\r\n"],"mappings":"AAAA,OAASA,WAAW,KAAQ,aAAa,CACzC,OAASC,0BAA0B,KAAQ,IAAI,CAC/C,OAASC,iBAAiB,KAAQ,gCAAgC,CAClE,OAASC,uBAAuB,KAAQ,cAAc,CAEtD,MAAO,IAAMC,kBAAiB,CAC5B,QADWA,kBAAiB,UACzBC,OAAM,MAANA,MAAM,OACT,UAACC,QAAQ,CAAEC,QAAQ,CAAK,2BACtB,GAAI,wBAAAJ,uBAAuB,CAACI,QAAQ,EAAE,CAAC,gDAAnC,sBAAqCC,MAAM,EAAG,CAAC,CAAE,CACnD,OACF,CACA,GAAMC,QAAO,CAAG,CACdC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,gCAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,EAAE,CAAEV,MACN,CAAC,CACH,CAAC,CACDC,QAAQ,CAACL,0BAA0B,CAACe,YAAY,EAAE,CAAC,CAEnDC,KAAK,CAAC,mCAAmC,CAAER,OAAO,CAAC,CAChDS,IAAI,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,IAAI,EAAE,GAAC,CACzBF,IAAI,CAAC,SAACG,IAAI,CAAK,CACd,GAAI,CAACA,IAAI,CAACC,EAAE,CAAE,CACZ,KAAMC,MAAK,CAACF,IAAI,CAACG,KAAK,CAAC,CACzB,CACAlB,QAAQ,CACNL,0BAA0B,CAACwB,cAAc,CACvCvB,iBAAiB,CAACmB,IAAI,CAACK,MAAM,CAAE,MAAM,CAAC,CACvC,CACF,CACH,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,GAAG,CAAK,CACdC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChBtB,QAAQ,CAACL,0BAA0B,CAAC8B,WAAW,CAACH,GAAG,CAAC,CAAC,CACvD,CAAC,CAAC,CACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}