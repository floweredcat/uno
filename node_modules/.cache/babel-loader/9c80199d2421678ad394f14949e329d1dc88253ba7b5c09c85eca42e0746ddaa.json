{"ast":null,"code":"import _defineProperty from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classNames from\"classnames\";import{useState}from\"react\";import styles from\"./styles.module.css\";import{useSelector}from\"react-redux\";import{selectObjectById}from\"../../store/Objects/selectors\";import{EditPackageForm}from\"../../Components/EditPackageForm/EditPackageForm\";import{PopupContainer}from\"../../Containers/PopupContainer/PopupContainer\";import{separateAmount}from\"../../helpers/separateAmount.ts\";import{InputCountedOption}from\"../../UI/InputCountedOption/InputCountedOption\";import{Table}from\"../../Components/Table/Table\";import{TableHeader}from\"../../Components/TableHeader/TableHeader\";import{UserData}from\"../../Components/UserData/UserData\";import{ObjectInfoContainer}from\"../../Containers/ObjectInfoContainer/ObjectInfoContainer\";import{useNavigate,useParams}from\"react-router-dom\";import{useInfoEntities}from\"./hooks/useInfoEntities.ts\";import{ROUTES}from\"../../assets/constants/Fixtires\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Object=function Object(){var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isPopupOpened=_useState2[0],setIsPopupOpened=_useState2[1];var objectData=useSelector(function(state){return selectObjectById(state,{id:id});});var infoEntities=useInfoEntities(objectData);var togglePopup=function togglePopup(){setIsPopupOpened(!isPopupOpened);};var _useState3=useState({station:1,storage:false,calculation:false,tarifiation:false,waiter:0,qr:0}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];if(!objectData){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:styles.objects,children:[/*#__PURE__*/_jsx(ObjectInfoContainer,{data:infoEntities[0]}),/*#__PURE__*/_jsx(ObjectInfoContainer,{data:infoEntities[1]}),/*#__PURE__*/_jsxs(\"div\",{className:classNames(styles.object_info,styles.objects_element),children:[/*#__PURE__*/_jsx(InputCountedOption,{label:\"Станция\",value:form.station,required:true}),form.storage&&/*#__PURE__*/_jsx(InputCountedOption,{label:\"Склад\",value:form.storage}),form.calculation&&/*#__PURE__*/_jsx(InputCountedOption,{label:\"Калькуляция\",value:form.calculation}),form.tarifiation&&/*#__PURE__*/_jsx(InputCountedOption,{label:\"Тарификация\",value:form.tarifiation}),form.waiter!==0&&/*#__PURE__*/_jsx(InputCountedOption,{label:\"Мобильный официант\",value:form.waiter}),form.qr!==0&&/*#__PURE__*/_jsx(InputCountedOption,{label:\"QR меню\",value:form.qr})]}),/*#__PURE__*/_jsx(ObjectInfoContainer,{data:infoEntities[2]}),/*#__PURE__*/_jsxs(\"div\",{className:classNames(styles.object_info,styles.status,styles.objects_element),children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.status_element,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"}),/*#__PURE__*/_jsx(\"div\",{className:classNames(styles.status_info,_defineProperty({},styles.status_info__inactive,objectData.ENDDT<=Date.now())),children:objectData.ENDDT<=Date.now()?\"Пакет не активен\":\"Активен\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.status_element,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:\"\\u0421\\u0443\\u043C\\u043C\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.status_info,children:objectData.AMOUNT?separateAmount(objectData.AMOUNT):\"0\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classNames(styles.button,styles.button_exit),onClick:function onClick(){return navigate(ROUTES.objects);},children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classNames(styles.button,styles.button_edit),onClick:function onClick(){return togglePopup();},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0430\\u043A\\u0435\\u0442\"}),isPopupOpened&&/*#__PURE__*/_jsx(PopupContainer,{togglePopup:togglePopup,children:/*#__PURE__*/_jsx(EditPackageForm,{togglePopup:togglePopup,form:form,setForm:setForm})}),/*#__PURE__*/_jsx(\"h2\",{className:styles.tableTitle,children:\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u0442\\u043E\\u0447\\u043A\\u0438\"}),/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHeader,{headers:[\"Дата операции\",\"Пользователь\",\"Номер операции\",\"Поступило\",\"Списано\"]}),/*#__PURE__*/_jsx(\"tr\",{className:styles.table_row,children:/*#__PURE__*/_jsx(UserData,{data:[\"Дата операции\",\"Пользователь\",\"Номер операции\",\"Поступило\",\"Списано\"]})})]})]});};","map":{"version":3,"names":["classNames","useState","styles","useSelector","selectObjectById","EditPackageForm","PopupContainer","separateAmount","InputCountedOption","Table","TableHeader","UserData","ObjectInfoContainer","useNavigate","useParams","useInfoEntities","ROUTES","Object","navigate","id","isPopupOpened","setIsPopupOpened","objectData","state","infoEntities","togglePopup","station","storage","calculation","tarifiation","waiter","qr","form","setForm","objects","object_info","objects_element","status","status_element","title","status_info","status_info__inactive","ENDDT","Date","now","AMOUNT","button","button_exit","button_edit","tableTitle","table_row"],"sources":["D:/dev/uno/src/Pages/Object/Object.jsx"],"sourcesContent":["import classNames from \"classnames\";\r\nimport { useState } from \"react\";\r\nimport styles from \"./styles.module.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectObjectById } from \"../../store/Objects/selectors\";\r\nimport { EditPackageForm } from \"../../Components/EditPackageForm/EditPackageForm\";\r\nimport { PopupContainer } from \"../../Containers/PopupContainer/PopupContainer\";\r\nimport { separateAmount } from \"../../helpers/separateAmount.ts\";\r\nimport { InputCountedOption } from \"../../UI/InputCountedOption/InputCountedOption\";\r\nimport { Table } from \"../../Components/Table/Table\";\r\nimport { TableHeader } from \"../../Components/TableHeader/TableHeader\";\r\nimport { UserData } from \"../../Components/UserData/UserData\";\r\nimport { ObjectInfoContainer } from \"../../Containers/ObjectInfoContainer/ObjectInfoContainer\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { useInfoEntities } from \"./hooks/useInfoEntities.ts\";\r\nimport {ROUTES} from \"../../assets/constants/Fixtires\"\r\n\r\nexport const Object = () => {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  const [isPopupOpened, setIsPopupOpened] = useState(false);\r\n  const objectData = useSelector((state) => selectObjectById(state, { id }));\r\n  const infoEntities = useInfoEntities(objectData)\r\n  const togglePopup = () => {\r\n    setIsPopupOpened(!isPopupOpened);\r\n  };\r\n\r\n  const [form, setForm] = useState({\r\n    station: 1,\r\n    storage: false,\r\n    calculation: false,\r\n    tarifiation: false,\r\n    waiter: 0,\r\n    qr: 0,\r\n  });\r\n\r\n  if (!objectData) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.objects}>\r\n      <ObjectInfoContainer data={infoEntities[0]} />\r\n      <ObjectInfoContainer data={infoEntities[1]} />\r\n      <div className={classNames(styles.object_info, styles.objects_element)}>\r\n        <InputCountedOption\r\n          label={\"Станция\"}\r\n          value={form.station}\r\n          required={true}\r\n        />\r\n        {form.storage && (\r\n          <InputCountedOption\r\n            label={\"Склад\"}\r\n            value={form.storage}\r\n          />\r\n        )}\r\n        {form.calculation && (\r\n          <InputCountedOption\r\n            label={\"Калькуляция\"}\r\n            value={form.calculation}\r\n          />\r\n        )}\r\n        {form.tarifiation && (\r\n          <InputCountedOption\r\n            label={\"Тарификация\"}\r\n            value={form.tarifiation}\r\n          />\r\n        )}\r\n        {form.waiter !== 0 && (\r\n          <InputCountedOption\r\n            label={\"Мобильный официант\"}\r\n            value={form.waiter}\r\n          />\r\n        )}\r\n        {form.qr !== 0 && (\r\n          <InputCountedOption\r\n            label={\"QR меню\"}\r\n            value={form.qr}\r\n          />\r\n        )}\r\n      </div>\r\n      <ObjectInfoContainer data={infoEntities[2]} />\r\n      <div\r\n        className={classNames(\r\n          styles.object_info,\r\n          styles.status,\r\n          styles.objects_element\r\n        )}>\r\n        <div className={styles.status_element}>\r\n          <h2 className={styles.title}>Статус</h2>\r\n          <div\r\n            className={classNames(styles.status_info, {\r\n              [styles.status_info__inactive]: objectData.ENDDT <= Date.now(),\r\n            })}>\r\n            {objectData.ENDDT <= Date.now() ? \"Пакет не активен\" : \"Активен\"}\r\n          </div>\r\n        </div>\r\n        <div className={styles.status_element}>\r\n          <h2 className={styles.title}>Сумма</h2>\r\n          <div className={styles.status_info}>\r\n            {objectData.AMOUNT ? separateAmount(objectData.AMOUNT) : \"0\"}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <button\r\n        type=\"button\"\r\n        className={classNames(styles.button, styles.button_exit)}\r\n        onClick={() => navigate(ROUTES.objects)}>\r\n        Назад\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        className={classNames(styles.button, styles.button_edit)}\r\n        onClick={() => togglePopup()}>\r\n        Редактировать пакет\r\n      </button>\r\n      {isPopupOpened && (\r\n        <PopupContainer togglePopup={togglePopup}>\r\n          <EditPackageForm\r\n            togglePopup={togglePopup}\r\n            form={form}\r\n            setForm={setForm}\r\n          />\r\n        </PopupContainer>\r\n      )}\r\n      <h2 className={styles.tableTitle}>История точки</h2>\r\n      <Table>\r\n        <TableHeader\r\n          headers={[\r\n            \"Дата операции\",\r\n            \"Пользователь\",\r\n            \"Номер операции\",\r\n            \"Поступило\",\r\n            \"Списано\",\r\n          ]}\r\n        />\r\n        <tr className={styles.table_row}>\r\n          <UserData\r\n            data={[\r\n              \"Дата операции\",\r\n              \"Пользователь\",\r\n              \"Номер операции\",\r\n              \"Поступило\",\r\n              \"Списано\",\r\n            ]}\r\n          />\r\n        </tr>\r\n      </Table>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}