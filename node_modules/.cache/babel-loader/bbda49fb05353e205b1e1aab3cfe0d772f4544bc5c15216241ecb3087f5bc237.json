{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nexports.__esModule = true;\nvar React = require(\"react\");\nvar react_dom_1 = require(\"react-dom\");\nvar Utils_1 = require(\"../Utils\");\n// import { parse, format } from 'date-fns';\n// import ReactTags from 'react-tag-autocomplete';\nvar ReactTags = require('react-tag-autocomplete');\nvar DEFAULT_DATE_INPUT_FORMAT = 'yyyy-MM-dd';\nvar inputCss = {\n  width: '100%',\n  height: '100%',\n  fontSize: '1em',\n  fontFamily: 'inherit'\n};\nvar Editor = /** @class */function (_super) {\n  __extends(Editor, _super);\n  function Editor() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.state = {\n      value: '',\n      values: [],\n      autofocus: false\n    };\n    _this.ref = null;\n    _this.setValueOnSuccess = function (values) {\n      if (values === void 0) {\n        values = _this.state.values;\n      }\n      var _a = _this.props,\n        success = _a.success,\n        cancel = _a.cancel;\n      // console.log('setValueOnSuccess: ', values);\n      success(values);\n      // cancel();\n    };\n\n    _this.handleDelete = function (i) {\n      // console.log('- handleDelete ', i);\n      var values = _this.state.values;\n      var newValues = values.filter(function (item, index) {\n        return index !== i;\n      });\n      _this.setState({\n        values: newValues\n      }, function () {\n        _this.setValueOnSuccess(newValues);\n      });\n    };\n    _this.handleAddition = function (item) {\n      var values = _this.state.values;\n      if (item.name) {\n        // console.log('- handleAddition: ', item);\n        values.push({\n          id: item.name,\n          name: item.name\n        });\n        _this.setState({\n          values: values\n        }, function () {\n          _this.setValueOnSuccess(values);\n        });\n      }\n    };\n    // order: handleBlur => sucess() => grid's cellEdited => grid's dataChanged => handleAddition\n    _this.handleBlur = function () {\n      var cancel = _this.props.cancel;\n      var newValue = _this.ref.input.input.value;\n      if (newValue) {\n        // console.log(111, newValue, this.ref);\n        var values = (0, Utils_1.clone)(_this.state.values);\n        values.push({\n          id: newValue,\n          name: newValue\n        });\n        // console.log('- handleBlur ', values);\n        _this.setValueOnSuccess(values);\n      } else {\n        cancel();\n      }\n      var el = (0, react_dom_1.findDOMNode)(_this.ref);\n      if (el && el.parentElement.parentElement.parentElement) {\n        el.parentElement.parentElement.parentElement.style.overflow = 'hidden';\n      }\n      // console.log('- handleBlur END');\n    };\n\n    return _this;\n  }\n  Editor.prototype.componentDidMount = function () {\n    var _this = this;\n    this.props.onRendered(function () {\n      var el = (0, react_dom_1.findDOMNode)(_this.ref);\n      el.style.zIndex = 1;\n      el.parentElement.parentElement.parentElement.style.overflow = 'inherit';\n      el.querySelector('input').focus();\n      var values = (_this.props.cell.getValue() || []).map(function (item) {\n        return typeof item === 'string' ? {\n          id: item,\n          name: item\n        } : item;\n      });\n      _this.setState({\n        values: values\n      });\n    });\n  };\n  Editor.prototype.render = function () {\n    var _this = this;\n    var editorParams = this.props.editorParams;\n    var values = this.state.values;\n    var suggestions = editorParams.values;\n    return React.createElement(\"div\", null, React.createElement(ReactTags, {\n      ref: function (ref) {\n        return _this.ref = ref;\n      },\n      placeholder: \"Select or Type\",\n      tags: values,\n      suggestions: suggestions,\n      allowNew: true,\n      autoresize: true,\n      autofocus: this.state.autofocus,\n      handleAddition: this.handleAddition,\n      handleDelete: this.handleDelete,\n      handleBlur: this.handleBlur,\n      minQueryLength: 0\n    }));\n  };\n  return Editor;\n}(React.Component);\nfunction default_1(cell, onRendered, success, cancel, editorParams) {\n  var container = document.createElement('div');\n  container.style.height = '100%';\n  (0, react_dom_1.render)(React.createElement(Editor, {\n    cell: cell,\n    onRendered: onRendered,\n    success: success,\n    cancel: cancel,\n    editorParams: editorParams\n  }), container);\n  return container;\n}\nexports[\"default\"] = default_1;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","exports","__esModule","React","require","react_dom_1","Utils_1","ReactTags","DEFAULT_DATE_INPUT_FORMAT","inputCss","width","height","fontSize","fontFamily","Editor","_super","_this","apply","arguments","state","value","values","autofocus","ref","setValueOnSuccess","_a","props","success","cancel","handleDelete","i","newValues","filter","item","index","setState","handleAddition","name","push","id","handleBlur","newValue","input","clone","el","findDOMNode","parentElement","style","overflow","componentDidMount","onRendered","zIndex","querySelector","focus","cell","getValue","map","render","editorParams","suggestions","createElement","placeholder","tags","allowNew","autoresize","minQueryLength","Component","default_1","container","document"],"sources":["C:/Development/uno/node_modules/react-tabulator/lib/editors/MultiSelectEditor.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar React = require(\"react\");\nvar react_dom_1 = require(\"react-dom\");\nvar Utils_1 = require(\"../Utils\");\n// import { parse, format } from 'date-fns';\n// import ReactTags from 'react-tag-autocomplete';\nvar ReactTags = require('react-tag-autocomplete');\nvar DEFAULT_DATE_INPUT_FORMAT = 'yyyy-MM-dd';\nvar inputCss = {\n    width: '100%',\n    height: '100%',\n    fontSize: '1em',\n    fontFamily: 'inherit'\n};\nvar Editor = /** @class */ (function (_super) {\n    __extends(Editor, _super);\n    function Editor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = { value: '', values: [], autofocus: false };\n        _this.ref = null;\n        _this.setValueOnSuccess = function (values) {\n            if (values === void 0) { values = _this.state.values; }\n            var _a = _this.props, success = _a.success, cancel = _a.cancel;\n            // console.log('setValueOnSuccess: ', values);\n            success(values);\n            // cancel();\n        };\n        _this.handleDelete = function (i) {\n            // console.log('- handleDelete ', i);\n            var values = _this.state.values;\n            var newValues = values.filter(function (item, index) { return index !== i; });\n            _this.setState({ values: newValues }, function () {\n                _this.setValueOnSuccess(newValues);\n            });\n        };\n        _this.handleAddition = function (item) {\n            var values = _this.state.values;\n            if (item.name) {\n                // console.log('- handleAddition: ', item);\n                values.push({ id: item.name, name: item.name });\n                _this.setState({ values: values }, function () {\n                    _this.setValueOnSuccess(values);\n                });\n            }\n        };\n        // order: handleBlur => sucess() => grid's cellEdited => grid's dataChanged => handleAddition\n        _this.handleBlur = function () {\n            var cancel = _this.props.cancel;\n            var newValue = _this.ref.input.input.value;\n            if (newValue) {\n                // console.log(111, newValue, this.ref);\n                var values = (0, Utils_1.clone)(_this.state.values);\n                values.push({ id: newValue, name: newValue });\n                // console.log('- handleBlur ', values);\n                _this.setValueOnSuccess(values);\n            }\n            else {\n                cancel();\n            }\n            var el = (0, react_dom_1.findDOMNode)(_this.ref);\n            if (el && el.parentElement.parentElement.parentElement) {\n                el.parentElement.parentElement.parentElement.style.overflow = 'hidden';\n            }\n            // console.log('- handleBlur END');\n        };\n        return _this;\n    }\n    Editor.prototype.componentDidMount = function () {\n        var _this = this;\n        this.props.onRendered(function () {\n            var el = (0, react_dom_1.findDOMNode)(_this.ref);\n            el.style.zIndex = 1;\n            el.parentElement.parentElement.parentElement.style.overflow = 'inherit';\n            el.querySelector('input').focus();\n            var values = (_this.props.cell.getValue() || []).map(function (item) {\n                return typeof item === 'string' ? { id: item, name: item } : item;\n            });\n            _this.setState({ values: values });\n        });\n    };\n    Editor.prototype.render = function () {\n        var _this = this;\n        var editorParams = this.props.editorParams;\n        var values = this.state.values;\n        var suggestions = editorParams.values;\n        return (React.createElement(\"div\", null,\n            React.createElement(ReactTags, { ref: function (ref) { return (_this.ref = ref); }, placeholder: \"Select or Type\", tags: values, suggestions: suggestions, allowNew: true, autoresize: true, autofocus: this.state.autofocus, handleAddition: this.handleAddition, handleDelete: this.handleDelete, handleBlur: this.handleBlur, minQueryLength: 0 })));\n    };\n    return Editor;\n}(React.Component));\nfunction default_1(cell, onRendered, success, cancel, editorParams) {\n    var container = document.createElement('div');\n    container.style.height = '100%';\n    (0, react_dom_1.render)(React.createElement(Editor, { cell: cell, onRendered: onRendered, success: success, cancel: cancel, editorParams: editorParams }), container);\n    return container;\n}\nexports[\"default\"] = default_1;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}