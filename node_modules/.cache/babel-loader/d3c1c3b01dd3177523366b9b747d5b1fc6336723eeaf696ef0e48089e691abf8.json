{"ast":null,"code":"import _objectSpread from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import styles from\"./styles.module.css\";import{selectObjectsIds,selectObjectsIsLoading}from\"../../../src/store/Objects/selectors\";import{Table}from\"../../Components/Table/Table\";import{TableHeader}from\"../../Components/TableHeader/TableHeader\";import{ObjectDataContainer}from\"../../Containers/ObjectDataContainer/ObjectDataContainer\";import{ButtonBar}from\"../../Components/ButtonsBar/ButtonsBar\";import{PopupContainer}from\"../../Containers/PopupContainer/PopupContainer\";import{AddObjectForm}from\"../../Components/AddObjectForm/AddObjectForm\";import{useSingleEffect}from\"../../hooks/UseSingleEffect\";import{getObjects}from\"../../store/Objects/Thunks/getObjects\";import{getPackagePrices}from\"../../store/ObjectPrices/Thunks/getPackagePrices\";import{getFransheses}from\"../../store/Franshises/Thunks/getFransheses\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OBJECT_HEADERS=[\"ID\",\"Название\",\"Город\",\"Телефон\",\"Дата\",\"Партнер\",\"Баланс\"];export var Objects=function Objects(){var dispatch=useDispatch();var userId=localStorage.userId;useSingleEffect(function(){dispatch(getObjects({userId:userId}));dispatch(getPackagePrices);dispatch(getFransheses({userId:userId}));},[]);var isLoading=useSelector(function(state){return selectObjectsIsLoading(state);});var objectsIds=useSelector(function(state){return selectObjectsIds(state);});var _useState=useState({name:\"\",city:\"\"}),_useState2=_slicedToArray(_useState,2),filter=_useState2[0],setFilter=_useState2[1];var setName=function setName(e){setFilter(_objectSpread(_objectSpread({},filter),{},{name:e.target.value}));};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isPopupOpened=_useState4[0],setIsPopupOpened=_useState4[1];var togglePopup=function togglePopup(){setIsPopupOpened(!isPopupOpened);};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.objects_wrapper,children:[/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHeader,{headers:OBJECT_HEADERS,handleSearch:setName,filter:filter.name}),objectsIds===null||objectsIds===void 0?void 0:objectsIds.map(function(id){return/*#__PURE__*/_jsx(ObjectDataContainer,{id:id,filter:filter},id);})]}),/*#__PURE__*/_jsx(ButtonBar,{onClicks:[togglePopup]})]}),isPopupOpened&&/*#__PURE__*/_jsx(PopupContainer,{togglePopup:togglePopup,children:/*#__PURE__*/_jsx(AddObjectForm,{togglePopup:togglePopup})})]});};","map":{"version":3,"names":["useState","useDispatch","useSelector","styles","selectObjectsIds","selectObjectsIsLoading","Table","TableHeader","ObjectDataContainer","ButtonBar","PopupContainer","AddObjectForm","useSingleEffect","getObjects","getPackagePrices","getFransheses","OBJECT_HEADERS","Objects","dispatch","userId","localStorage","isLoading","state","objectsIds","name","city","filter","setFilter","setName","e","target","value","isPopupOpened","setIsPopupOpened","togglePopup","objects_wrapper","map","id"],"sources":["D:/dev/uno/src/Pages/Objects/Objects.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport styles from \"./styles.module.css\";\r\nimport {\r\n  selectObjectsIds,\r\n  selectObjectsIsLoading,\r\n} from \"../../../src/store/Objects/selectors\";\r\nimport { Table } from \"../../Components/Table/Table\";\r\nimport { TableHeader } from \"../../Components/TableHeader/TableHeader\";\r\nimport { ObjectDataContainer } from \"../../Containers/ObjectDataContainer/ObjectDataContainer\";\r\nimport { ButtonBar } from \"../../Components/ButtonsBar/ButtonsBar\";\r\nimport { PopupContainer } from \"../../Containers/PopupContainer/PopupContainer\";\r\nimport { AddObjectForm } from \"../../Components/AddObjectForm/AddObjectForm\";\r\nimport { useSingleEffect } from \"../../hooks/UseSingleEffect\";\r\nimport { getObjects } from \"../../store/Objects/Thunks/getObjects\";\r\nimport { getPackagePrices } from \"../../store/ObjectPrices/Thunks/getPackagePrices\";\r\nimport { getFransheses } from \"../../store/Franshises/Thunks/getFransheses\";\r\n\r\nconst OBJECT_HEADERS = [\r\n  \"ID\",\r\n  \"Название\",\r\n  \"Город\",\r\n  \"Телефон\",\r\n  \"Дата\",\r\n  \"Партнер\",\r\n  \"Баланс\",\r\n];\r\n\r\nexport const Objects = () => {\r\n  const dispatch = useDispatch();\r\n  const userId = localStorage.userId;\r\n  useSingleEffect(() => {\r\n    dispatch(getObjects({ userId }));\r\n    dispatch(getPackagePrices);\r\n    dispatch(getFransheses({ userId }));\r\n  }, []);\r\n  const isLoading = useSelector((state) => selectObjectsIsLoading(state));\r\n  const objectsIds = useSelector((state) => selectObjectsIds(state));\r\n  const [filter, setFilter] = useState({ name: \"\", city: \"\" });\r\n  const setName = (e) => {\r\n    setFilter({ ...filter, name: e.target.value });\r\n  };\r\n  const [isPopupOpened, setIsPopupOpened] = useState(false);\r\n  const togglePopup = () => {\r\n    setIsPopupOpened(!isPopupOpened);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n  return (\r\n    <div className={styles.objects_wrapper}>\r\n      <>\r\n        <Table>\r\n          <TableHeader headers={OBJECT_HEADERS}\r\n              handleSearch={setName} filter={filter.name}/>\r\n          {objectsIds?.map((id) => (\r\n            <ObjectDataContainer\r\n              key={id}\r\n              id={id}\r\n              filter={filter}\r\n            />\r\n          ))}\r\n        </Table>\r\n        <ButtonBar onClicks={[togglePopup]} />\r\n      </>\r\n      {isPopupOpened && (\r\n        <PopupContainer togglePopup={togglePopup}>\r\n          <AddObjectForm togglePopup={togglePopup} />\r\n        </PopupContainer>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"+LAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAOC,OAAM,KAAM,qBAAqB,CACxC,OACEC,gBAAgB,CAChBC,sBAAsB,KACjB,sCAAsC,CAC7C,OAASC,KAAK,KAAQ,8BAA8B,CACpD,OAASC,WAAW,KAAQ,0CAA0C,CACtE,OAASC,mBAAmB,KAAQ,0DAA0D,CAC9F,OAASC,SAAS,KAAQ,wCAAwC,CAClE,OAASC,cAAc,KAAQ,gDAAgD,CAC/E,OAASC,aAAa,KAAQ,8CAA8C,CAC5E,OAASC,eAAe,KAAQ,6BAA6B,CAC7D,OAASC,UAAU,KAAQ,uCAAuC,CAClE,OAASC,gBAAgB,KAAQ,kDAAkD,CACnF,OAASC,aAAa,KAAQ,6CAA6C,CAAC,6IAE5E,GAAMC,eAAc,CAAG,CACrB,IAAI,CACJ,UAAU,CACV,OAAO,CACP,SAAS,CACT,MAAM,CACN,SAAS,CACT,QAAQ,CACT,CAED,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAO,EAAS,CAC3B,GAAMC,SAAQ,CAAGjB,WAAW,EAAE,CAC9B,GAAMkB,OAAM,CAAGC,YAAY,CAACD,MAAM,CAClCP,eAAe,CAAC,UAAM,CACpBM,QAAQ,CAACL,UAAU,CAAC,CAAEM,MAAM,CAANA,MAAO,CAAC,CAAC,CAAC,CAChCD,QAAQ,CAACJ,gBAAgB,CAAC,CAC1BI,QAAQ,CAACH,aAAa,CAAC,CAAEI,MAAM,CAANA,MAAO,CAAC,CAAC,CAAC,CACrC,CAAC,CAAE,EAAE,CAAC,CACN,GAAME,UAAS,CAAGnB,WAAW,CAAC,SAACoB,KAAK,QAAKjB,uBAAsB,CAACiB,KAAK,CAAC,GAAC,CACvE,GAAMC,WAAU,CAAGrB,WAAW,CAAC,SAACoB,KAAK,QAAKlB,iBAAgB,CAACkB,KAAK,CAAC,GAAC,CAClE,cAA4BtB,QAAQ,CAAC,CAAEwB,IAAI,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CAAC,wCAArDC,MAAM,eAAEC,SAAS,eACxB,GAAMC,QAAO,CAAG,QAAVA,QAAO,CAAIC,CAAC,CAAK,CACrBF,SAAS,gCAAMD,MAAM,MAAEF,IAAI,CAAEK,CAAC,CAACC,MAAM,CAACC,KAAK,GAAG,CAChD,CAAC,CACD,eAA0C/B,QAAQ,CAAC,KAAK,CAAC,yCAAlDgC,aAAa,eAAEC,gBAAgB,eACtC,GAAMC,YAAW,CAAG,QAAdA,YAAW,EAAS,CACxBD,gBAAgB,CAAC,CAACD,aAAa,CAAC,CAClC,CAAC,CAED,GAAIX,SAAS,CAAE,CACb,mBAAO,qBAAK,YAAU,EAAM,CAC9B,CACA,mBACE,aAAK,SAAS,CAAElB,MAAM,CAACgC,eAAgB,wBACrC,wCACE,MAAC,KAAK,yBACJ,KAAC,WAAW,EAAC,OAAO,CAAEnB,cAAe,CACjC,YAAY,CAAEY,OAAQ,CAAC,MAAM,CAAEF,MAAM,CAACF,IAAK,EAAE,CAChDD,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEa,GAAG,CAAC,SAACC,EAAE,qBAClB,KAAC,mBAAmB,EAElB,EAAE,CAAEA,EAAG,CACP,MAAM,CAAEX,MAAO,EAFVW,EAAE,CAGP,EACH,CAAC,GACI,cACR,KAAC,SAAS,EAAC,QAAQ,CAAE,CAACH,WAAW,CAAE,EAAG,GACrC,CACFF,aAAa,eACZ,KAAC,cAAc,EAAC,WAAW,CAAEE,WAAY,uBACvC,KAAC,aAAa,EAAC,WAAW,CAAEA,WAAY,EAAG,EAE9C,GACG,CAEV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}