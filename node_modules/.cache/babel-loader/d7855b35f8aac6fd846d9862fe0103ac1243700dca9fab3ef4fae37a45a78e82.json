{"ast":null,"code":"import _slicedToArray from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classNames from\"classnames\";import{useEffect,useState}from\"react\";import{useDispatch}from\"react-redux\";import{addUser}from\"../../store/Users/Thunks/addUser\";import{FormElem}from\"../FormElem/FormElem\";import{InputText}from\"../../UI/InputText/InputText\";import{InputPhone}from\"../../UI/InputPhone/InputPhone\";import{InputPass}from\"../../UI/InputPass/InputPass\";import{InputRadio}from\"../../UI/InputRadio/InputRadio\";import styles from\"./styles.module.css\";import{isEmpty,isEmail,isMobilePhone}from\"validator\";import{ROLES}from\"../../assets/constants/Fixtires\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var AddUserForm=function AddUserForm(_ref){var togglePopup=_ref.togglePopup;var _localStorage=localStorage,userId=_localStorage.userId,userIdAccess=_localStorage.userIdAccess;var dispatch=useDispatch();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),phone=_useState6[0],setPhone=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),city=_useState8[0],setCity=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),pass=_useState10[0],setPass=_useState10[1];var _useState11=useState(ROLES[0].id),_useState12=_slicedToArray(_useState11,2),role=_useState12[0],setRole=_useState12[1];var initialValidate={validate:undefined,errorMessage:\" \"};var _useState13=useState(initialValidate),_useState14=_slicedToArray(_useState13,2),validate=_useState14[0],setValidate=_useState14[1];useEffect(function(){if(validate.errorMessage.length<5&&phone.length>8){dispatch(addUser({userId:userId,email:email,role:role,name:name,phone:phone,pass:pass}));togglePopup();resetForm();}},[validate.errorMessage]);var resetForm=function resetForm(){setCity(\"\");setEmail(\"\");setName(\"\");setPass(\"\");setPhone(\"\");setRole(ROLES[0].id);};var handleValidate=function handleValidate(){if(isEmpty(email)||isEmpty(phone)||isEmpty(city)||isEmpty(pass)||isEmpty(name)){setValidate({isValid:false,errorMessage:\"Пожалуйста, заполните все поля\"});}else if(!isEmail(email)){setValidate({isValid:false,errorMessage:\"Неверный формат почты\"});}else if(!isMobilePhone(phone)||phone.length<10||phone.length>14){setValidate({isValid:false,errorMessage:\"Неверный номер телефона\"});}else setValidate({isValid:true,errorMessage:\"   \"});};var onSubmit=function onSubmit(event){event.preventDefault();handleValidate();};return/*#__PURE__*/_jsxs(FormElem,{title:\"Добавление пользователя\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(InputText,{value:name,label:\"Наименование\",setValue:setName}),/*#__PURE__*/_jsx(InputText,{value:email,label:\"email\",setValue:setEmail}),/*#__PURE__*/_jsx(InputPhone,{value:phone,label:\"Телефон\",setValue:setPhone}),/*#__PURE__*/_jsx(InputText,{value:city,label:\"Город\",setValue:setCity}),/*#__PURE__*/_jsx(InputPass,{value:pass,label:\"Пароль\",setValue:setPass}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:styles.radios_label,children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0440\\u043E\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.radios_container,children:ROLES.slice(userIdAccess==1?0:userIdAccess).map(function(el){var content=el.content,id=el.id;return/*#__PURE__*/_jsx(InputRadio,{label:content,value:id,checked:role===id,setValue:setRole});})})]}),/*#__PURE__*/_jsx(\"span\",{className:styles.errorMessage,children:validate.errorMessage}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:classNames(styles.button,styles.form_submit),children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"})]});};","map":{"version":3,"names":["classNames","useEffect","useState","useDispatch","addUser","FormElem","InputText","InputPhone","InputPass","InputRadio","styles","isEmpty","isEmail","isMobilePhone","ROLES","AddUserForm","togglePopup","localStorage","userId","userIdAccess","dispatch","email","setEmail","name","setName","phone","setPhone","city","setCity","pass","setPass","id","role","setRole","initialValidate","validate","undefined","errorMessage","setValidate","length","resetForm","handleValidate","isValid","onSubmit","event","preventDefault","radios_label","radios_container","slice","map","el","content","button","form_submit"],"sources":["D:/dev/uno/src/Components/AddUserForm/AddUserForm.jsx"],"sourcesContent":["import classNames from \"classnames\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addUser } from \"../../store/Users/Thunks/addUser\";\r\nimport { FormElem } from \"../FormElem/FormElem\";\r\nimport { InputText } from \"../../UI/InputText/InputText\";\r\nimport { InputPhone } from \"../../UI/InputPhone/InputPhone\";\r\nimport { InputPass } from \"../../UI/InputPass/InputPass\";\r\nimport { InputRadio } from \"../../UI/InputRadio/InputRadio\";\r\nimport styles from \"./styles.module.css\";\r\nimport { isEmpty, isEmail, isMobilePhone } from \"validator\";\r\nimport { ROLES } from \"../../assets/constants/Fixtires\";\r\n\r\nexport const AddUserForm = ({ togglePopup }) => {\r\n  const { userId, userIdAccess } = localStorage;\r\n  const dispatch = useDispatch();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [city, setCity] = useState(\"\");\r\n  const [pass, setPass] = useState(\"\");\r\n  const [role, setRole] = useState(ROLES[0].id);\r\n  const initialValidate = {\r\n    validate: undefined,\r\n    errorMessage: \" \",\r\n  };\r\n  const [validate, setValidate] = useState(initialValidate);\r\n  useEffect(() => {\r\n    if (validate.errorMessage.length < 5 && phone.length > 8) {\r\n      dispatch(addUser({ userId, email, role, name, phone, pass }));\r\n      togglePopup();\r\n      resetForm();\r\n    }\r\n  }, [validate.errorMessage]);\r\n\r\n  const resetForm = () => {\r\n    setCity(\"\");\r\n    setEmail(\"\");\r\n    setName(\"\");\r\n    setPass(\"\");\r\n    setPhone(\"\");\r\n    setRole(ROLES[0].id);\r\n  };\r\n  const handleValidate = () => {\r\n    if (\r\n      isEmpty(email) ||\r\n      isEmpty(phone) ||\r\n      isEmpty(city) ||\r\n      isEmpty(pass) ||\r\n      isEmpty(name)\r\n    ) {\r\n      setValidate({\r\n        isValid: false,\r\n        errorMessage: \"Пожалуйста, заполните все поля\",\r\n      });\r\n    } else if (!isEmail(email)) {\r\n      setValidate({\r\n        isValid: false,\r\n        errorMessage: \"Неверный формат почты\",\r\n      });\r\n    } else if (\r\n      !isMobilePhone(phone) ||\r\n      phone.length < 10 ||\r\n      phone.length > 14\r\n    ) {\r\n      setValidate({\r\n        isValid: false,\r\n        errorMessage: \"Неверный номер телефона\",\r\n      });\r\n    } else setValidate({ isValid: true, errorMessage: \"   \" });\r\n  };\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    handleValidate();\r\n  };\r\n\r\n  return (\r\n    <FormElem\r\n      title={\"Добавление пользователя\"}\r\n      onSubmit={onSubmit}>\r\n      <InputText\r\n        value={name}\r\n        label={\"Наименование\"}\r\n        setValue={setName}\r\n      />\r\n      <InputText\r\n        value={email}\r\n        label={\"email\"}\r\n        setValue={setEmail}\r\n      />\r\n      <InputPhone\r\n        value={phone}\r\n        label={\"Телефон\"}\r\n        setValue={setPhone}\r\n      />\r\n      <InputText\r\n        value={city}\r\n        label={\"Город\"}\r\n        setValue={setCity}\r\n      />\r\n      <InputPass\r\n        value={pass}\r\n        label={\"Пароль\"}\r\n        setValue={setPass}\r\n      />\r\n      {(\r\n        <>\r\n          <span className={styles.radios_label}>Выберите роль:</span>\r\n          <div className={styles.radios_container}>\r\n            { ROLES.slice(userIdAccess == 1 ? 0 : userIdAccess).map((el) => {\r\n              const { content, id } = el;\r\n              return (\r\n                <InputRadio\r\n                  label={content}\r\n                  value={id}\r\n                  checked={role === id}\r\n                  setValue={setRole}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </>\r\n      )}\r\n      <span className={styles.errorMessage}>{validate.errorMessage}</span>\r\n      <button\r\n        type=\"submit\"\r\n        className={classNames(styles.button, styles.form_submit)}>\r\n        Добавить ползователя\r\n      </button>\r\n    </FormElem>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}